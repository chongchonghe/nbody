# README

## Authors

Mohammed Khalil, ChongChong He

## Description

ASTR615 HW #4: Simulation and Visualization of N-body Problems

### Problem 1

### Problem 2

#### Files

Files are in the folder *simulation*. 

- cluster.py: A code to generate the initial conditions for a stellar 
cluster with 1000 particles. The details and methods used are 
described in the writeup. It will also make a figure imf.pdf to compare the IMF 
generated by this code with analytical lines.

- cluster.txt: The initial conditions generated by cluster.py

- mayavi_parallel.py: A parallel code to produce fansy jpg's to visualize 
the outputs. Need to have the Python packages mayavi and mpi4py installed.

- *.ini: The parameters used when running mayavi_parallel.py. They control 
the position and rotation of the camera and more. Detailes are described 
in paramters.ini

- run.sh: A bash script to run all tasks with parameters used in our simulations

- testspeed.py: A python script to run the tasks and count the time it takes to
run each job.

#### How to run

An example: to run the simulation of the cluster with pp-nbody code with 
epsilon = 0.01, h = 0.001, num of steps = 200, and an output for every 
1 step, cd into simulations/ and do the following

	../pp-nbody/main cluster.txt cluster 1000 0.01 0.001 200 1

and all the outputs (txt files) will be in the folder cluster/.

To visualize the outputs, use visual_parallel.py. e.g.

	mpirun -np 4 python visual_parallel.py cluster cluster_rotating_camera.ini
	
will run in parallel using 4 CPUs to plot all the outputs in the folder cluster/ 
and create a folder cluster\_jpg to store the jpg's.

Then,

	python makemovie.py cluster_jpg
	
will make a movie form those images in the folder movie.


## TODO
1. Plot of space diagram (x vs. y) needs to have scale. Ues ax.axis('equal')
2. Check with Derek about direct force formula: r/|r| * 1/(r+epsilon)^2 or 
r / (r+epsilon)^(3/2).
3. Clean unnecessary comment, `*~` files
3. BH-binary: main_binary.c
